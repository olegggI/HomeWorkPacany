<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<!--

    Реализуйте конструктор Calculator, который создает расширяемые объекты-калькуляторы.
    По умолчанию калькулятор должен поддерживать две операции: "+" и "-" (см. строку 24 и 25)

    Добавьте в калькулятор метод addOperation для добавления новых операций (см. строку 27 и 28).

-->

<script>

    // Конструктор калькуляторов
    function Calculator() {
        var supportedOperations = {
            "+": function (a, b) { return a + b;},
            "-": function (a, b) { return a - b; }
        };

        this.addOperation = function(operant, callback) {
            //add new operation to the supportedOperations array
            supportedOperations[operant] = callback;
        };

        this.calculate = function (expression) {
            var args = this.parse(expression), //receive an array with parsed string
                operation = args.operant, //determine type of operation
                method = supportedOperations[operation]; //define what method to call to operate numbers

            //check if operation is supported by the application
            if (operation in supportedOperations) {
                return method(args.number1, args.number2);
            } else {
                alert("The operation" + "' " + operation + " '"  + "is not supported by this application. Run addOperation method first.");

                return false;
            }

        };

        //parse string parameter in the function
        this.parse = function (expression) {
            var     num1,
                    num2,
                    temp,
                    parcedOperant;

            temp = expression.split(' ');
            num1 = parseInt(temp[0]);
            parcedOperant = temp[1];
            num2 = parseInt(temp[2]);

            return {
                number1: num1,
                operant: parcedOperant,
                number2: num2
            }
        };
    }

    var calc = new Calculator();

    alert(calc.calculate("3 + 7")); // Должно выводиться 10
    alert(calc.calculate("7 - 3")); // Должно выводиться 4

//    calc.addOperation("*", function (a, b) { return a * b; });
//    calc.addOperation("/", function (a, b) { return a / b; });

    alert(calc.calculate("3 * 7")); // Должно выводиться 21
    alert(calc.calculate("8 / 4")); // Должно выводиться 2
</script>
</body>
</html>